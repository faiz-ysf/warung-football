{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% block meta %}{% endblock meta %}
    <title>{% block title %}Warung Football{% endblock %}</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>

    </head>
    <body class="min-h-screen font-sans"
            style="background:linear-gradient(135deg,#0f172a,#1e293b,#006D6F);">

      <main>
        {% block content %}{% endblock content %}
        {% include 'modal.html' %}
        <div id="deleteModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm">
            <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-xl text-white w-11/12 sm:w-96 max-h-screen">
              <div class="p-6 border-b border-white/20">
                <h3 class="text-xl font-semibold">Delete Product</h3>
                <p>This action cannot be undone.</p>
              </div>
              <div class="p-6">
                <p>Delete <span id="deleteProductName" class="font-medium"></span>?</p>
              </div>
              <div class="flex justify-end gap-3 p-6 border-t border-white/10">
                <button onclick="closeDeleteModal()" class="px-4 py-2 border border-white/20 rounded-md hover:bg-white/10">Cancel</button>
                <button id="confirmDeleteBtn" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-md text-white">Delete</button>
              </div>
            </div>
          </div>

        <!-- Edit Modal -->
        <div id="editModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm">
        <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-xl text-white
                    w-11/12 sm:w-3/5 md:w-1/2 lg:w-2/5 xl:w-1/3 max-h-screen overflow-y-auto p-6">
          
          <div class="flex items-center justify-between mb-6 border-b border-white/20 pb-4">
            <h3 class="text-xl font-semibold">Edit Product</h3>
            <button type="button" onclick="closeEditModal()"
                    class="text-white/70 hover:text-white p-2 rounded-lg">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 
                      1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 
                      1.414L10 11.414l-4.293 4.293a1 1 0 
                      01-1.414-1.414L8.586 10 4.293 5.707a1 
                      1 0 010-1.414z"
                      clip-rule="evenodd"></path>
              </svg>
            </button>
          </div>

          <form id="editProductForm" class="space-y-4">
            <input type="hidden" id="editProductId" name="id">

            <div>
              <label class="block text-sm font-medium mb-2 text-white/80">Product Name</label>
              <input id="editProductName" name="name" required
                    class="w-full px-4 py-2 rounded-md bg-white/90 text-gray-900 focus:ring-2 focus:ring-[#3AB09E]">
            </div>

            <div>
              <label class="block text-sm font-medium mb-2 text-white/80">Price</label>
              <input type="number" step="0.01" id="editProductPrice" name="price" required
                    class="w-full px-4 py-2 rounded-md bg-white/90 text-gray-900 focus:ring-2 focus:ring-[#3AB09E]">
            </div>

            <div>
              <label class="block text-sm font-medium mb-2 text-white/80">Description</label>
              <textarea id="editProductDesc" name="descriptions" rows="4" required
                        class="w-full px-4 py-2 rounded-md bg-white/90 text-gray-900 focus:ring-2 focus:ring-[#3AB09E]"></textarea>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2 text-white/80">Thumbnail URL</label>
              <input id="editProductThumb" name="thumbnail" type="url"
                    class="w-full px-4 py-2 rounded-md bg-white/90 text-gray-900 focus:ring-2 focus:ring-[#3AB09E]"
                    placeholder="https://example.com/image.jpg">
            </div>

            <div>
              <label class="block text-sm font-medium mb-2 text-white/80">Category</label>
              <select id="editProductCategory" name="category" required
                      class="w-full px-4 py-2 rounded-md bg-white/90 text-gray-900 focus:ring-2 focus:ring-[#3AB09E]">
                <option value="">Choose a category</option>
                <option value="shoes">Shoes</option>
                <option value="men_sportwear">Men Sportwear</option>
                <option value="women_sportwear">Women Sportwear</option>
                <option value="kids_sportwear">Kids Sportwear</option>
                <option value="accessories">Accessories</option>
                <option value="equipment">Sports Equipment</option>
                <option value="bags">Bags & Backpacks</option>
                <option value="outerwear">Jackets & Hoodies</option>
              </select>
            </div>

            <div class="flex justify-end gap-4 mt-6 pt-4 border-t border-white/20">
              <button type="button" onclick="closeEditModal()"
                      class="px-6 py-3 border border-white/20 text-white/80 rounded-md hover:bg-white/10">
                Cancel
              </button>
              <button type="submit"
                      class="px-6 py-3 bg-[#3AB09E] hover:bg-[#39A78D] text-white rounded-md">
                Update Product
              </button>
            </div>
          </form>
        </div>
      </div>
      <!-- --- End Edit Product Modal --- -->
       <div id="toast-component"
            class="fixed bottom-5 right-5 z-[9999] px-4 py-3 rounded-lg opacity-0 translate-y-64
            transition-all duration-300 bg-white border shadow-lg text-gray-800">
          <div class="font-semibold" id="toast-title"></div>
          <div class="text-sm" id="toast-message"></div>
    </div>
        <script src="{% static 'js/toast.js' %}"></script>
	      <script src="{% static 'js/modalControl.js' %}"></script>
      </main>
    </body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', () => {
      const toastFlag = '{{ request.COOKIES.toast|default:"" }}';
      if (toastFlag === 'logout' && typeof showToast === 'function') {
        showToast("Success", "Youâ€™ve been logged out!", "success");
        document.cookie = "toast=; Path=/; Max-Age=0"; // clear
      }
    });
</script>